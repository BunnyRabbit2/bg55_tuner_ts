
<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="keywords" content="Forza Motorsport, Forza Horizon, Forza, Tuning Calculator, Forza Tuning, Up 2 Speed Customs, Lou-ne-tunes, U2SC, justlou72, Lou's Tunes, bigglou55, bg55">
	<!-- Edit the Three lines below as needed -->
	<meta name="description" content="BG55 FTC Main">
	<title>BG55.COM FTC Main</title>
	<!-- -->
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<link href="css/bootstrap.css" media="screen" rel="stylesheet">
	<script src="js/npm.js"></script>
	<script src="js/bootswatch.js"></script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
</head>

<body class=" hasGoogleVoiceExt" style="background-color: #1a1a1a;">
	<div class="navbar navbar-default navbar-fixed-top">
		<div class="container-fluid">
			<div class="navbar-header">
				<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
			</div>
			<div class="collapse navbar-collapse" id="navbar-main">
				<ul class="nav navbar-nav">
					<li><a href="bg55ftc-main.php">Forza Tuning Calculator</a></li>
					<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Other Versions <span class="caret"></span></a>
					<ul class="dropdown-menu">
						<li><a href="bg55ftc-main.php">Main Forza Calculator</a></li>
						<li><a href="bg55ftc-main-fh5.php">FH5 Only Calculator</a></li>
						<li><a href="bg55ftc-classic.php">Classic Calculator</a></li>
					</ul>
					</li>
					<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">FTC Resources <span class="caret"></span></a>
						<ul class="dropdown-menu">
							<li><a href="https://docs.google.com/spreadsheets/d/1raqqG7S6FKr1omq2ooYOGtJcj0RJus3w1uqer1e5S4c/edit?usp=sharing" target="_blank">justLou72's FM7 Lists &amp; Guides</a></li>
							<li><a href="fm7-tuning-help.html" target="_blank">Forza Upgrades &amp; Tuning Assistant</a></li>
                            <li><a href="https://docs.google.com/spreadsheets/d/1mO9KO6Luo6LCEB-JdwJs8MH0i_I6QXTcx4xK4GN4Wjs/edit?usp=sharing" target="_blank">justLou72's FM6/FH3 Lists &amp; Guides</a></li>
							<li>-------------------------</li>
							<li><a href="https://docs.google.com/spreadsheets/d/14M2PCuOfRivmSLGKSDCNWyRpIuUSh9Nxh2CWPA_ngXU" target="_blank">Feuerdog's FD Tuner 1.4 Calculator</a></li>
                            <li><a href="https://www.dltuning.co.uk/" target="_blank">Dave Lacey's DLTuning Calculator</a></li>
							<li>-------------------------</li>
							<li><a href="https://forums.forzamotorsport.net/turn10_postst132673_FH4-Engine-Swap-List-and-other-engine-details.aspx" target="_blank">FH4 Engine Swap List &amp; Details</a></li>
							<li><a href="https://forums.forzamotorsport.net/turn10_postst104271_FM7-Engine-Swap-List-and-other-engine-details.aspx" target="_blank">FM7 Engine Swap List &amp; Details</a></li> 
							<li><a href="https://forums.forzamotorsport.net/turn10_postst76641_FH3-Engines-List.aspx" target="_blank">FH3 Engine SwapList &amp; Details</a></li>
							<li><a href="http://forums.forzamotorsport.net/turn10_postst40816_FM6-Engine-Swap-List.aspx" target="_blank">FM6 Engine Swap List &amp; Details</a></li> 
							<li>-------------------------</li>
							<li><a href="https://docs.google.com/spreadsheets/d/1xI07iE3Y1Aqcmx30Yp3Aq8dCbOCMabjYCBwGnFsF3X0/edit?usp=sharing" target="_blank">ManteoMax's Forza Motorsport 7 Spreadsheets</a></li>
							<li><a href="https://docs.google.com/spreadsheets/d/1m979pSIzSlE1HQH0tth0_2ZGqc1RNMPRFY908ihgv8I/edit?usp=sharing" target="_blank">ManteoMax's Forza Horizon 3 Spreadsheets</a></li>
							<li><a href="https://docs.google.com/spreadsheets/d/1fJjy1c3hdHcWey9rsu6MfEtCdGKEOA_uvSCeOCvhfkg/edit?usp=sharing" target="_blank">ManteoMax's Forza Motorsport 6 Spreadsheets</a></li>
							<li>-------------------------</li>
							<li><a href="http://www.rapid-racer.com/suspension-tuning.php" target="_blank">Rapid-Racer.com Suspension Tuning Guide</a></li>
							<li><a href="http://rapidtables.com/convert/color/index.htm" target="_blank">Color Conversion (to HSL)</a></li>
						</ul>
				</ul>
				<ul class="nav navbar-nav navbar-right">
					<li><a href="fm7-tuning-help.html" target="_blank">Help</a></li>
					<li><a href="http://discord.up2speedcustoms.com/" target="_blank">Discord</a></li>
				</ul>
			</div>
		</div>
    </div>
    
	<div class="container-fluid" style="padding-left: 10%;padding-right: 10%">
		<br>
	<div class="jumbotron" id="banner">
		<h3 class="text-primary">BG55.COM Forza Tuning Calculator (BG55-FTC)</h3>
        <i>Additional Assistance and Testing by the <a href="http://discord.up2speedcustoms.com/" target="_blank">Up 2 Speed Custons (U2SC) Community</a>.</i>
	</div>

	<div>
		<a name="input"></a>
	</div>
	
<!-- BEGIN PHP SCRIPT -->

<?php
//==================================================================
// CORE PHP FUNCTIONS
//------------------------------------------------------------------

//==================================================================
// Error Reporting
//------------------------------------------------------------------
error_reporting(0); // Turn off all error reporting

//==================================================================
// BEGIN SCRIPT
//==================================================================

//==================================================================
// Core Tuning Entries
//------------------------------------------------------------------
$tunedatetime = date("d-M-Y Hi:s");
$rhf = number_format($_POST['rhf'], 1, '.', ''); // Front Ride Height
$rhr = number_format($_POST['rhr'], 1, '.', ''); // Rear Ride Height
if ($rhf == NULL) { $rhf = 0.0; }
if ($rhr == NULL) { $rhr = 0.0; }
$ovyear = $_POST['ovyear']; // Vehicle Year
$ovmake = $_POST['ovmake']; // Vehicle Make
$ovmodel = $_POST['ovmodel']; // Vehicle Model
if ($ovyear == NULL) { $ovyear = date("Y"); }
if ($ovmake == NULL) { $ovmake = "U2SC"; }
if ($ovmodel == NULL) { $ovmodel = date("l-Hi"); }
#----------------
$tirecomp = $_POST['tirecomp']; //getting tire compound
if ($tirecomp == NULL) { $tirecomp = "Stock"; }
$ftire = (int)$_POST['ftire']; // Front Tire Width
$fasp = (int)$_POST['fasp']; // Front Tire Aspect Ratio
$frim = (int)$_POST['frim']; // Front Rim Diameter
$samesize = $_POST['samesize']; // Square tire setup (front and rear same size)
if ($samesize == "Same") {
	$rtire = $ftire; // Rear Tire Width
	$rasp = $fasp; // Rear Tire Aspect Ratio
	$rrim = $frim; // Rear Rim Diameter
} else {
	$rtire = (int)$_POST['rtire']; // Rear Tire Width
	$rasp = (int)$_POST['rasp']; // Rear Tire Aspect Ratio
	$rrim = (int)$_POST['rrim']; // Rear Rim Diameter
}
$power = (int)$_POST['hp']; // Max Power
$torque = (int)$_POST['tq']; // Max Torque
$weight = (int)$_POST['wght']; // Weight
$wpf = number_format((int)$_POST['wpf'], 0, '.', '');  // Weight Percentage Front (as whole number)
$dffront = number_format((int)$_POST['dff'], 0, '.', ''); // Downforce Front
$dfrear = number_format((int)$_POST['dfr'], 0, '.', ''); // Downforce Rear
$gamever = $_POST['gamever']; // Game Verison
if ($gamever == NULL) { $gamever = "FM7"; }
$gameverstat = $gamever;
if ($gamever == "FH4") { $gamever = "FH3"; }
$StiffType = $_POST['stifftype']; // Damper Stiffness
if ($StiffType == NULL) { $StiffType = "Normal"; }
$TravType = $_POST['travtype']; // Damper Travel
if ($TravType == NULL) { $TravType = "Average"; }

//------------------------------------------------------------------
// Transmission Tuning Entries
//------------------------------------------------------------------
$redline = (int)$_POST['redline']; // Redline RPM
if ($redline == NULL) { $redline = 0; }
$topspeed = (int)$_POST['topspd']; // Input Top Speed
if ($topspeed == NULL) { $topspeed = 0; }
$numgears = (int)$_POST['numgears']; //Number of Forward Gears
if ($numgears <= 0) { $numgears = 6; }

//------------------------------------------------------------------
// Advanced Data Input
//------------------------------------------------------------------
$resetdmod = $_POST['resetdmod']; // Reset advanced drivetrain input requested
if ($resetdmod == "reset") {
	$fdratiog = 0;
	$fdratioo = 0;
	$cfirstg = 0;
	$cfirstgr = 0;
	$cspeedfirstg = 0;
	$cspeedf = 0;
	$speedfirst = 0;
} else {
	$fdratioo = number_format($_POST['fdratio'], 2, '.', ''); //Number of Forward Gears
	if ($fdratioo !== 0) { $fdratiog = $fdratioo; }
	$cfirstg = number_format($_POST['firstg'], 2, '.', ''); //Custom 1st gear ratio
	$cspeedfirst = number_format($_POST['speedfirst'], 2, '.', ''); // Input 1st gear Top Speed
	if ($cspeedfirst !== 0) { $cspeedfirstg = $cspeedfirst; }		
}
$resetsmod = $_POST['resetsmod']; // Reset to default fine-tuning requested
if ($resetsmod == "reset") {
	$csmod = number_format(1.00, 2, '.', '');
	$csmodf = "$csmod x";
    //
	$asmod = number_format(1.00, 2, '.', '');
	$asmodf = "$asmod x";
    //
	$rsmod = number_format(1.00, 2, '.', '');
	$rsmodf = "$rsmod x";
    //
	$bsmod = number_format(1.00, 2, '.', '');		
	$bsmodf = "$bsmod x";
} else {
    $cstiffn = $_POST['cstiff'];
    if ($cstiffn == NULL) { $cstiffn = number_format(1.00, 2, '.', ''); }
    $csmod = number_format(($cstiffn), 2, '.', '');
    //
    $astiffn = $_POST['astiff'];
    if ($astiffn == NULL) { $astiffn = number_format(1.00, 2, '.', ''); }
    $asmod = number_format(($astiffn), 2, '.', '');
    //
    $rstiffn = $_POST['rstiff'];
    if ($rstiffn == NULL) { $rstiffn = number_format(1.00, 2, '.', ''); }
    $rsmod = number_format(($rstiffn), 2, '.', '');
    //
    $bstiffn = $_POST['bstiff']; 
    if ($bstiffn == NULL) { $bstiffn = number_format(1.00, 2, '.', ''); }
    $bsmod = number_format(($bstiffn), 2, '.', '');
}

//==================================================================
//==================================================================
// Metric Conversions For Calculations
//------------------------------------------------------------------
$units = $_POST['units']; // Imperial or Metric
if ($units == NULL) { $units = "Imperial"; }
if ($units == 'Metric') {
	$metric = 1;
} elseif ($units == 'Imperial') {
	$metric = 0;
}
if ($metric == 1) {
	$rhtag = 'mm';
	$prtag = 'bar';
	$pwtag = 'kw';
	$tqtag = 'Nm';
	$wtag = 'kg';
	$stag = 'kph';
	$pwrtag = 'kg/kw';
	$wght = $weight; // Preserve form input
	$dff = $dffront; // Preserve form input
	$dfr = $dfrear; // Preserve form input
	$hp = $power; // Preserve form input
	$tq = $torque; // Preserve form input
	$tspeed = $topspeed; // Preserve form input
	$cspeedf = $cspeedfirst; // Preserve form input
	// Convert to Imperial for certain formulas to work.
	$dff = $dff * 2.20462;
	$dfr = $dfr * 2.20462;
	$wght = $wght * 2.20462;
	$hp = $hp * 1.34102; // convert KW to HP for modifier calculations 
	$tq = $tq * 0.7375621483695506; // convert Nm to lb-ft for modifier calculations
	$cspeedfirst = number_format(($cspeedfirst * 0.621371), 1, '.', ''); // convert to KPH to MPH for calculations
	if ($topspeed !== 0) { $topspeed = number_format(($topspeed * 0.621371), 1, '.', ''); } // convert to KPH to MPH for calculations
	$pwr = number_format(($weight / $power), 2, '.', ''); // Power to Weight Ratio
} else {
	$rhtag = 'in';
	$prtag = 'psi';
	$pwtag = 'HP';
	$tqtag = 'LB-FT';
	$wtag = 'lbs';
	$stag = 'mph';
	$pwrtag = 'lbs/HP';
	$wght = $weight; // Preserve form input
	$dff = $dffront; // Preserve form input
	$dfr = $dfrear; // Preserve form input
	$hp = $power; // Preserve form input
	$tq = $torque; // Preserve form input
	$tspeed = $topspeed; // Preserve form input
	$cspeedf = $cspeedfirst; // Preserve form input
	$pwr = number_format(($weight / $power), 2, '.', ''); // Power to Weight Ratio
}
//==================================================================
//==================================================================

//------------------------------------------------------------------
// Determine Tune Type
//------------------------------------------------------------------
$ttype = $_POST['ttype']; // Tune Type - Circuit, Drag or Drift
if ($ttype == NULL) { $ttype = 'Circuit'; }
$drivetype = $_POST['drivetype']; // Drive Type
$elayout = $_POST['elayout']; // Engine Layout
if ($elayout == NULL) { $elayout = 'front'; }
if ($elayout == 'front') { $elayoutd = 'Front Engine'; }
if ($elayout == 'mid') { $elayoutd = 'Mid Engine'; }
if ($elayout == 'rear') { $elayoutd = 'Rear Engine'; }
$ttyped = "$gameverstat $ttype";
$offroad = 0;
$drag = 0;
$drift = 0;
$damperdouble = 0;
if ($ttype == 'Circuit') {
	$fharbmod = 1.0;
	$fhdampmod = 1.0;        
	$fhspringmod = 1.0;
    if ($gamever == 'FH3') {
        $fharbmod = 1.60;
        $fhdampmod = 1.30;
    }
}      
if ($ttype == 'Drift') {
	$drift = 1;
	$fharbmod = 1.0;
	$fhdampmod = 1.0;        
	$fhspringmod = 1.0;
    if ($gamever == 'FH3') {
        $fharbmod = 1.60;
        $fhdampmod = 1.30;
    }
}      
if ($ttype == "Drag") {
    $drag = 1;
	$fharbmod = 1.0;
	$fhdampmod = 1.0;        
	$fhspringmod = 1.0;
	if ($gamever == "FH3") {
        $fharbmod = 1.60;
        $fhdampmod = 1.30;
	}
}      
if ($ttype == "Rally") {
    $offroad = 1;
    $fharbmod = 0.90;    
	$fhdampmod = 0.7;
	$fhspringmod = 0.75;
    if ($gamever == "FH3") {
        $damperdouble = 1;
        $fharbmod = 1.0;
    }
}      
if ($ttype == "Offroad") {
    $offroad = 2;
    $fharbmod = 0.80;      
    $fhdampmod = 0.7;
	$fhspringmod = 0.55;
    if ($gamever == "FH3") {
        $damperdouble = 1;
        $fharbmod = 1.0;
    } else {
    }
}      
if ($ttype == "Buggy") {
    $offroad = 3;
    $fharbmod = 0.70;
    $fhdampmod = 0.7;
	$fhspringmod = 0.32;
    if ($gamever == "FH3") {
        $damperdouble = 1;
        $fharbmod = 1.0;
    }
}

//==================================================================
//==================================================================
// General Calculations
//------------------------------------------------------------------

//------------------------------------------------------------------
// Setting Front and Rear Weight Calculations & Other Special Vars
//------------------------------------------------------------------
$dft = ($dff + $dfr);
$wpr = (int)(100 - $wpf); // Weight Percentage Rear (whole number)
$wpfd = number_format(($wpf/100), 3, '.', ''); // Weight Percentage Front (decimal)
$wprd = number_format(($wpr/100), 3, '.', ''); // Weight Percentage Rear (decimal)
$wghtf = number_format(($wght * ($wpf/100)), 1, '.', '');
$wghtf = ($wghtf + $dff);
$wghtr = number_format(($wght * ($wpr/100)), 1, '.', '');
$wghtr = ($wghtr + $dfr);
//$wghtfc = (($wght + $dft) * ($wpf/100));
//$wghtrc = (($wght + $dft) * ($wpr/100)); 
if ($wpf !== 50) {
	$wpm = (($wpf - 50) / 2);
} else {
	$wpm = 0;
}
// Setting Weight % modifiers
$wpmf = 1;
$wpmr = 1;
if ($wpfd > .50) {
	$wpmf = (1 + ($wpfd - .50));
	$wpmr = (1 - (.50 - $wprd));
}
if ($wpf < .50) {
	$wpmf = (1 - (.50 - $wpfd));
	$wpmr = (1 + ($wprd - .50));
}

//------------------------------------------------------------------
// Damper Travel Type & Fine Tuning Percentages
//------------------------------------------------------------------
// Damper TRAVEL
$TravTyped = "Average";
$reboundstmod = 2.00;
$cambermod = $cambermod + 0.0;
$castermod = $castermod + 0.0;
if ($TravType == "Shortest") {
    $TravTyped = "Shortest";
	$reboundstmod = 1.70;
    $cambermod = $cambermod + 0.2;
    $castermod = $castermod + -0.2;
}
if ($TravType == "Shorter") {
    $TravTyped = "Shorter";
	$reboundstmod = 1.85;
    $cambermod = $cambermod + 0.1;
    $castermod = $castermod + -0.1;
}
if ($TravType == "Longer") {
    $TravTyped = "Longer";
	$reboundstmod = 1.5;
    $cambermod = $cambermod + -0.1;
    $castermod = $castermod + 0.1;
}
if ($TravType == "Longest") {
    $TravTyped = "Longest";
	$reboundstmod = 2.0;
    $cambermod = $cambermod + -0.2;
    $castermod = $castermod + 0.2;
}
// STIFFNESS values and modifiers
$StiffTyped = "Normal";
$springstmod = 1.00;
$arbstmod = 1.00;
$bumpstmod = 1.00;
$reboundbaseF = $bumpbaseF * 1.50;
if ($StiffType == "Firm2") {
    $StiffTyped = "Firmest";
    $springstmod = 1.1;
    $arbstmod = 1.25;
	$bumpstmod = 1.40;
}
if ($StiffType == "Firm") {
    $StiffTyped = "Firmer";
    $springstmod = 1.05;
    $arbstmod = 1.15;
	$bumpstmod = 1.20;
}
if ($StiffType == "Soft") {
    $StiffTyped = "Softer";
    $springstmod = 0.95;
    $arbstmod = 0.85;
	$bumpstmod = 0.90;
}
if ($StiffType == "Soft2") {
    $StiffTyped = "Softest";
    $springstmod = 0.90;
    $arbstmod = 0.70;
	$bumpstmod = 0.80;
}
// MIN/MAX checks
if ($csmod > 2.00) {
	$csmod = number_format(1.00, 2, '.', '');
	//$csmod = number_format(($csmod/100), 2, '.', '');
	$csmodf = "ERROR";
} else {
	$csmodf = "$csmod x";
}
if ($asmod > 2.00) {
	$asmod = number_format(1.00, 2, '.', '');
	//$asmod = number_format(($asmod/100), 2, '.', '');
	$asmodf = "ERROR";
} else {
	$asmodf = "$asmod x";
}
if ($rsmod > 2.00) {
	$rsmod = number_format(1.00, 2, '.', '');
	//$rsmod = number_format(($rsmod/100), 2, '.', '');
	$rsmodf = "ERROR";
} else {
	$rsmodf = "$rsmod x";
}
if ($bsmod > 3.00) {
	$bsmod = number_format(1.00, 2, '.', '');
	//$bsmod = number_format(($bsmod/100), 2, '.', '');
	$bsmodf = "ERROR";
} else {
	$bsmodf = "$bsmod x";
}

//------------------------------------------------------------------
// Calculate Tire Ratios
//------------------------------------------------------------------
$tireavg = (($ftire + $rtire) / 2);
$tirefrat = ($ftire / $tireavg);
$tirerrat = ($rtire / $tireavg);

//------------------------------------------------------------------
// Setting Rear tire multiplier for brake balance calculations
//------------------------------------------------------------------
$tiredmulti = 0;
$tirediff = ($rtire - $ftire);
if ($tirediff >= 20) { $tiredmulti++; }
if ($tirediff >= 40) { $tiredmulti++; }
if ($tirediff >= 60) { $tiredmulti++; }
if ($tirediff >= 80) { $tiredmulti++; }

//==================================================================
// Advanced Tire calculations
//------------------------------------------------------------------
if ($metric == 1) {
	$tireunitl = "mm";
	$tireunitv = "L";
	// metric front tire
	$ftw = $ftire;
	$fth = ($ftw * ($fasp/100));
	$ftr = ($frim * 25.4);
	// metric rear tire;
	$rtw = $rtire;
	$rth = ($rtw * ($rasp/100));
	$rtr = ($rrim * 25.4);
} else {
	$tireunitl = "in";
	$tireunitv = "cu ft";
	// imperial front tire
	$ftw = ($ftire / 25.4);
	$fth = ($ftw * ($fasp/100));
	$ftr = $frim;
	// imperial rear tire;
	$rtw = ($rtire / 25.4);
	$rth = ($rtw * ($rasp/100));
	$rtr = $rrim;
}
// Front Tires
$ftd = ($fth + $fth + $ftr);
$ftri = ($ftr / 2);
$ftro = ($ftd / 2);
$ftvi = (3.14159265359 * ($ftri * $ftri) * $ftw);
$ftvo = (3.14159265359 * ($ftro * $ftro) * $ftw);
// Rear Tires
$rtd = ($rth + $rth + $rtr);
$rtri = ($rtr / 2);
$rtro = ($rtd / 2);
$rtvi = (3.14159265359 * ($rtri * $rtri) * $rtw);
$rtvo = (3.14159265359 * ($rtro * $rtro) * $rtw);
// Final Calculations
$ftc = number_format((2 * 3.14159265359 * $ftro), 2, '.', '');
$rtc = number_format((2 * 3.14159265359 * $rtro), 2, '.', '');
if ($metric == 1) {
	$ftv = number_format((($ftvo - $ftvi) / 1000)/1000, 2, '.', '');
	$rtv = number_format((($rtvo - $rtvi) / 1000)/1000, 2, '.', '');
} else {
	$ftv = number_format(($ftvo - $ftvi)/1728, 2, '.', '');
	$rtv = number_format(($rtvo - $rtvi)/1728, 2, '.', '');	
}

//==================================================================
//==================================================================
// Suspension Tuning
//------------------------------------------------------------------

//------------------------------------------------------------------
// SRING RATE
//------------------------------------------------------------------

// Modifiers
$wpfds = $wpfd; // Front Weight percentage in decimal form
$sstiffmod = $springstmod; //setting based on stiffness/travel
$weightmod = 0.85; //used to dial in the spring rates

// Calculating Spring Rates
$srate = ($wght * $weightmod * $springstmod * $fhspringmod) / 2;
$fsrate = ($srate * $wpfds) + ($dff/10);
$rsrate = ($srate - $fsrate) + ($dfr/10);
if ($metric == 1) {
    $fsrate = $fsrate * 0.453592;
    $rsrate = $rsrate * 0.453592;
    $srfa = number_format($fsrate * 0.3937, 1, '.', '');
    $srra = number_format($rsrate * 0.3937, 1, '.', '');
} else {
    $srfa = number_format($fsrate, 1, '.', '');
    $srra = number_format($rsrate, 1, '.', '');
}

// Apply Spring User Fine-Tuning Stiffness Modifier
$srfa = number_format($srfa * $csmod, 1, '.', '');
$srra = number_format($srra * $csmod, 1, '.', '');

//------------------------------------------------------------------
// ARB - intentionally calculated with reversed weight R/F
//------------------------------------------------------------------
// FM3-7 & FH2 ARB Range = 1.0 to 40.0
// FH3 ARB Range = 1.0 to 65.0

// Setting front base ARB
if ($offroad > 0) {
	$abasef = 7.00;
} else {
	$abasef = ($wghtf * 0.006 * $fharbmod);
}
// Additional Adjustment for Vehicle weight.
$arbwmod = 0.00;
$wcalc = $weight;
while ($wcalc > 2750) {
	$abasef = $abasef + 0.1;
	$wcalc = $wcalc - 100;
}
while ($wcalc < 2500) {
	$abasef = $abasef - 0.1;
	$wcalc = $wcalc + 100;
}

// Caculating Rear ARB
if ($drivetype == 'RWD') { $abaser = $abasef * 0.75; }
if ($drivetype == 'AWD') { $abaser = $abasef * 0.875; }
if ($drivetype == 'FWD') { $abaser = $abasef * 1.125; }

// Adjusting for Weight bias
$arbwmodb = 0.00;
$wpcalc = $wpf;
while ($wpcalc > 50) {
	$abasef = $abasef + 0.27;
	$abaser = $abaser - 0.27;
	$wpcalc = $wpcalc - 1;
}
while ($wpcalc < 50) {
	$abasef = $abasef - 0.27;
	$abaser = $abaser + 0.27;
	$wpcalc = $wpcalc + 1;
}

// Setting ARBS
$arbf = number_format($abasef * $arbstmod , 1, '.', ''); 
$arbr = number_format($abaser * $arbstmod , 1, '.', '');
// Saving the RAW ARB calculations
$arbfraw = $arbf;
$arbrraw = $arbr;

//Setting ARB Modifiers
$arblay = 0.0;
if ($elayout == "mid") { $arblay = 0.2; }
if ($elayout == "rear") { $arblay = 0.4; }
$arbtmod = 1.85;
if ($tirecomp == "Drag") { $arbmod = $arbtmod + 0.11; }
if ($tirecomp == "Stock") { $arbmod = $arbtmod + 0.11; }
if ($tirecomp == "Street") { $arbmod = $arbtmod + 0.07; }
if ($tirecomp == "Sport") { $arbmod = $arbtmod + 0.04; }
if ($tirecomp == "Offroad") { $arbmod = $arbtmod + 0.07; }
if ($tirecomp == "Rally") { $arbmod = $arbtmod + 0.04; }
if ($tirecomp == "Race") { $arbmod = $arbtmod; }
$arbf = number_format(($arbf * $arbmod), 1, '.', '');
$arbr = number_format(($arbr * $arbmod) + $arblay, 1, '.', '');
// Apply ARB User Fine-Tuning Stiffness Modifier
$arbf = number_format(($arbf * $asmod), 1, '.', '');
$arbr = number_format(($arbr * $asmod), 1, '.', '');

// Checking for Min-Max values
if ($arbf < 1.0) { $arbf = number_format(1.0, 1, '.', ''); }
if ($arbr < 1.0) { $arbr = number_format(1.0, 1, '.', ''); }
if ($gamever !== 'FH3' ) {
	if ($arbf > 40.0) { $arbf = number_format(40.0, 1, '.', ''); }
	if ($arbr > 40.0) { $arbr = number_format(40.0, 1, '.', ''); }
} else {
	if ($arbf > 65.0) { $arbf = number_format(65.0, 1, '.', ''); }
	if ($arbr > 65.0) { $arbr = number_format(65.0, 1, '.', ''); }
}

//------------------------------------------------------------------
// Determine Rebound & Bump
//------------------------------------------------------------------
// FM3-7 & FH2 Damper Range = 1.0 to 14.0
// FH3 Race Damper Range = 3.0 to 20.0
// FH3 Off-Road Damper Range = 1.0 to 10.0

// Setting Front Bump and Rebound Base values
$bbase = 3.50 * $bumpstmod;
if ($gamever == 'FH3') {
	$bbase = ($bbase * 1.2) + 2;
}
// Modding front Bump base for vehicle weight.
$wcalc = $weight;
while ($wcalc > 2750) {
	$bbase = $bbase + 0.01;
	$wcalc = $wcalc - 150;
}
while ($wcalc < 2500) {
	$bbase = $bbase - 0.01;
	$wcalc = $wcalc + 150;
}
// Calculating Bump and Rebound
if ($drivetype == 'RWD') {
	$bumpf = $bbase + 0.0;
	$bumpr = $bbase + 0.0;
	$rebf = ($bumpf * $reboundstmod) + 0.0;
	$rebr = ($bumpr * $reboundstmod) * 0.86;
}
if ($drivetype == 'AWD') {
	$bumpf = $bbase + 0.0;
	$bumpr = $bbase + 0.1;
	$rebf = ($bumpf * $reboundstmod) + 0.75;
	$rebr = ($bumpr * $reboundstmod) * 0.86;
}
if ($drivetype == 'FWD') {
	$bumpf = $bbase + 0.0;
	$bumpr = $bbase + 0.2;
	$rebf = ($bumpf * $reboundstmod) + 1.5;
	$rebr = ($bumpr * $reboundstmod) * 0.86;
}
if ($elayout == 'mid') { 
	$bumpr = $bumpr + 0.13;
	$rebr = $rebr + 0.22;
}
if ($elayout == 'rear') { 
	$bumpr = $bumpr + 0.26;
	$rebr = $rebr + 0.44;
}
// Applying Bump & Rebound Stiffness Modifiers
$bumpf = number_format(($bumpf * $bsmod), 1, '.', '');
$bumpr = number_format(($bumpr * $bsmod), 1, '.', '');
$rebf = number_format(($rebf * $rsmod), 1, '.', '');
$rebr = number_format(($rebr * $rsmod), 1, '.', '');
// Applying FH3 2x Damper Modifier & Off-Road/Rally Base Dampers.
$bumpf2 = "-";
$bumpr2 = "-";
$rebf2 = "-";
$rebr2 = "-";
// Setting Off-Road Dampers base.
if ($gamever !== 'FH3' and $offroad > 0) {
	$bumpf = 2.5;
	$bumpr = 2.4;
	$rebf = 11.5;
	$rebr = 10.5;
} elseif ($offroad > 0) {
	$bumpf = 2.5;
	$bumpr = 2.4;
	$rebf = 8.5;
	$rebr = 7.8;
	$bumpf2 = number_format(($bumpf * 2), 1, '.', '');
	$bumpr2 = number_format(($bumpr * 2), 1, '.', '');
	$rebf2 = number_format(($rebf * 2), 1, '.', '');
	$rebr2 = number_format(($rebr * 2), 1, '.', '');
}

//==================================================================
//==================================================================
// Dynamic Alignment Calculations
//------------------------------------------------------------------
//------------------------------------------------------------------
// Determine Camber
//------------------------------------------------------------------
if ($drivetype == 'RWD') {
	$fcamber = (2.0 + $cambermod);
	$rcamber = (1.5 + $cambermod);
}
if ($drivetype == 'FWD') {
	$fcamber = (1.6 + $cambermod);
	$rcamber = (1.6 + $cambermod);
}
if ($drivetype == 'AWD') {
	$fcamber = (2.0 + $cambermod);
	$rcamber = (1.7 + $cambermod);
}

// Beginning Dynamic Camber Modifiers
$ftmodw = 0;
// Adjusting for Tire Composition
if ($tirecomp == "Sport") {$ftmodw = $ftmodw + .1;}
if ($tirecomp == "Race") {$ftmodw = $ftmodw + .2;}
if ($tirecomp == "Drag") {$ftmodw = $ftmodw - .4;}
if ($tirecomp == "Rally") {$ftmodw = $ftmodw - .1;}
if ($tirecomp == "Offroad") {$ftmodw = $ftmodw - .2;}
$rtmodw = $ftmodw;

//Adjusting for Vehicle Weight $wpf $weight
// Weight Percentage
$wpcalc = $wpf;
while ($wpcalc > 52) {
	$ftmodw = $ftmodw - .1;
	$rtmodw = $rtmodw + .1;
	$wpcalc = $wpcalc - 5;
}
while ($wpcalc < 47) {
	$ftmodw = $ftmodw + .1;
	$rtmodw = $rtmodw - .1;
	$wpcalc = $wpcalc + 5;
}

// Total Weight
$wcalc = $weight;
while ($wcalc > 2000) {
	$ftmodw = $ftmodw - .1;
	$rtmodw = $rtmodw - .1;
	$wcalc = $wcalc - 500;
}

// Adjusting for Tire Tread Width & Sidewall Profile
// Tire Width
// Front
$ftcalc = $ftire;
while ($ftcalc > 280) {
	$ftmodw = $ftmodw - .1;
	$ftcalc = $ftcalc - 20;
}
// Rear
$rtcalc = $rtire;
while ($rtcalc > 300) {
	$rtmodw = $rtmodw - .1;
	$rtcalc = $rtcalc - 20;
}
        
// Applying Front and Rear Camber Modifiers
$fcamber = $fcamber + $ftmodw;
$rcamber = $rcamber + $rtmodw;
// Formatting Output
$camf = number_format((0 - $fcamber), 1, '.', '');
$camr = number_format((0 - $rcamber), 1, '.', '');
if ($camf > 0.0) {$camf = number_format(0, 1, '.', '');}
if ($camr > 0.0) {$camr = number_format(0, 1, '.', '');}

//------------------------------------------------------------------
// Determine Toe & Caster
//------------------------------------------------------------------
$caster = 5.0 + $castermod;
$toef = 0.0;
$toer = 0.0;
// Setting Drive Specific Base Caster
if ($drivetype == 'RWD') { 
	$caster = $caster + 0.0; 
	if (($tq >= 600) or ($hp >=750)) { $toer = $toer - 0.1; }
}
if ($drivetype == 'AWD') { 
	$caster = $caster - 0.2; 
	$toef = $toef + 0.0;
	$toer = $toer + 0.0;
	if (($tq >= 750) or ($hp >=950)) { $toer = $toer - 0.1; }
}
if ($drivetype == 'FWD') { 
	$caster = $caster + 1.2; 
	$toef = $toef + 0.0;
	$toer = $toer + 0.0;
}
// Adjusting Caster based on weight % and other variables
if ($elayout == "mid") { $caster = $caster - 0.2; }
if ($elayout == "rear") { $caster = $caster - 0.4; }

$wpcalc = $wpf;
while ($wpcalc > 51) {
	$caster = $caster + 0.1;
	$wpcalc = $wpcalc - 2;
}
while ($wpcalc < 49) {
	$caster = $caster - 0.1;
	$wpcalc = $wpcalc + 2;
}

if ($offroad > 0) {
    if ($drivetype == 'RWD') {$caster = $caster - 1.0; }
    if ($drivetype == 'AWD') {$caster = $caster - 1.5; }
    if ($drivetype == 'FWD') {$caster = $caster - 2.0; }
}
$stangle = "n/a";
// Checking Min/Max
if ($caster > 7.0) { $toef = 7.0; }
// Formatting Toe Output
$toef = number_format($toef, 1, '.', '');
$toer = number_format($toer, 1, '.', '');
$caster = number_format($caster, 1, '.', '');

//------------------------------------------------------------------
// Determine PSI/BAR
//------------------------------------------------------------------
//REAR
if ($tirecomp == "Offroad") { $rpsi = number_format(25.0, 1, '.', ''); }
if ($tirecomp == "Rally") { $rpsi = number_format(26.0, 1, '.', ''); }
if ($tirecomp == "Race") { $rpsi = number_format(28.0, 1, '.', ''); }
if ($tirecomp == "Drag") { $rpsi = number_format(28.0, 1, '.', ''); }
if ($tirecomp == "Sport") { $rpsi = number_format(29.5, 1, '.', ''); }
if ($tirecomp == "Street") { $rpsi = number_format(30.5, 1, '.', ''); }
if ($tirecomp == "Stock") { $rpsi = number_format(31.0, 1, '.', ''); }
//FRONT
if ($drivetype == "RWD") { $fpsi = number_format($rpsi + 0.5, 1, '.', ''); }
if ($drivetype == "AWD") { $fpsi = number_format($rpsi + 0.0, 1, '.', ''); }
if ($drivetype == "FWD") { $fpsi = number_format($rpsi + 0.0, 1, '.', ''); }
if (($drivetype == "RWD") && ($ttype == "Drag")) { $fpsi = number_format(35.0, 1, '.', ''); }
//DRIFT
if ($drift == 1) {	$rpsi = $fpsi - 5.5; }
//METRIC
if ($metric == 1) {
	$rbar = ($rpsi * 0.0689475729);
	$fbar = ($fpsi * 0.0689475729);
	$rpsi = round($rbar, 2);
	$fpsi = round($fbar, 2);
}

//------------------------------------------------------------------
// Determine Brake Settings
//------------------------------------------------------------------
if ($tirecomp == "Race") { $brfor = '~140'; }
if ($tirecomp == "Drag") { $brfor = '~150'; }
if ($tirecomp == "Rally") { $brfor = '~135'; }
if ($tirecomp == "Offroad") { $brfor = '~135'; }
if ($tirecomp == "Sport") { $brfor = '~135'; }
if ($tirecomp == "Street") { $brfor = '~130'; }
if ($tirecomp == "Stock") { $brfor = '~130'; }
$brbal = 50;
if ($wpf > 64) { $brbal = $brbal + 1; }
if ($wpf > 58) { $brbal = $brbal + 1; }
if ($wpf > 53) { $brbal = $brbal + 1; }
if ($wpf > 51) { $brbal = $brbal + 1; }
if (($wpf < 49) or ($tirediff >= 20)) { $brbal = $brbal - 1; }
if (($wpf < 46) or ($tirediff >= 50)) { $brbal = $brbal - 1; }
if (($wpf < 43) or ($tirediff >= 80)) { $brbal = $brbal - 1; }
if (($wpf < 40) or ($tirediff >= 120)) { $brbal = $brbal - 1; }
if ($offroad > 0) {$brbal = $brbal -1;}
// Min/Max
if ($brbal > 54) { $brbal = 54; }
//if ($brbal < 47) { $brbal = 47; }

//==================================================================
//==================================================================
// Determine Differential Settings
//------------------------------------------------------------------
if ($hp > $tq) { $difeng = $hp; }
if ($hp < $tq) { $difeng = $tq; }
$rtiredif = $rtire;
$weightdiff = $weight;
$wpfdiff = $wpf;

$rdiff = 'X';
$rdiffd = 'X';
$fdiff = 'X';
$fdiffd = 'X';
$cdiff = 'X';

//------------------------------------------------------------------
// Rear Wheel Drive
if (($drivetype == 'RWD') or ($drivetype == 'AWD')) {
	$rdiff = 54;
	
	// Mofdifying Rear Diff Accel based on Max Torque
	$difengc = $difeng;
	while ($difengc > 200) {
		$rdiff = ($rdiff + 1);
		$difengc = $difengc - 50;
	}
	
	// Mofdifying Rear Diff Accel based on Tire Width
	$rtcalc = $rtire;
	while ($rtcalc > 270) {
		$rdiff = ($rdiff + 1);
		$rtcalc = $rtcalc - 10;
	}
	// Mofdifying Rear Diff Accel based on Tire Compound
	if ($tirecomp == "Stock") { $rdiff = ($rdiff + 0); }
	if ($tirecomp == "Street") { $rdiff = ($rdiff + 6); }
	if ($tirecomp == "Sport") { $rdiff = ($rdiff + 12); }
	if ($tirecomp == "Race") { $rdiff = ($rdiff + 18); }
	if ($tirecomp == "Drag") { $rdiff = ($rdiff + 18); }
	if ($tirecomp == "Rally") { $rdiff = ($rdiff + 18); }
	if ($tirecomp == "Offroad") { $rdiff = ($rdiff + 18); }
   // Modifying Rear Diff Accell based on Total Weight
	$wcalc = $weight;
	while ($wcalc > 3500) {
		$rdiff = ($rdiff + 1);
		$wcalc = $wcalc - 250;
	}
	while ($wcalc < 2500) {
		$rdiff = ($rdiff - 1);
		$wcalc = $wcalc + 250;
	}
	// Checking MAX and setting Decel
	if ($rdiff > 95) { $rdiff = 95; }
    $rdiffd = $rdiff - 10;
    if ($offroad > 0) {
        $rdiff = 100;
        $rdiffd = 95;
    }
}

//------------------------------------------------------------------
// Front Wheel Drive
//------------------------------------------------------------------
if (($drivetype == 'FWD') or ($drivetype == 'AWD')) {
	$fdiffd = 0;
	$fdiff = 50;
	// Mofdifying Front Diff Accel based on Max Torque
	$difengc = $difeng;
	while ($difengc > 100) {
		$fdiff = ($fdiff + 1);
		$difengc = $difengc - 50;
	}
	 // Mofdifying Front Diff Accel based Tires
	if ($ftire >= 275) { $fdiff = ($fdiff + 2); }
	if ($ftire >= 295) { $fdiff = ($fdiff + 2); }
	if ($ftire >= 315) { $fdiff = ($fdiff + 2); }
	// Min/Max
	if ($fdiff > 65) { $fdiff = 65; }
}

//------------------------------------------------------------------
// ALL Wheel Drive
//------------------------------------------------------------------
if ($drivetype == 'AWD') {
	$cdiff = 80;
	$fdiff = $fdiff;
	if ($fdiff > 55) { $fdiff = 55; }
	$fdiffd = 0;
	$rdiff = $rdiff;
	if ($rdiff > 90) { $rdiff = 90; }
	$rdiffd = $rdiff - 10;
	// Modifying Center Diff based on tire width diff front-rear
	if ($tirediff < 0) { $cdiff = ($cdiff - 20); }
	$diftires = $tirediff;
	while ($diftires > 20) {
		$cdiff = ($cdiff + 1);
		$diftires = $diftires - 8;
	}
    if ($offroad > 0) {
        $rdiff = 100;
        $rdiffd = 95;
        $fdiff = 65;
        $fdiffd = 0;
        $cdiff = 70;
    }
	// ****** Checks & Modifiers *******
	// Min/Max
	if ($cdiff > 95) { $cdiff = 95; }
}

//==================================================================
//==================================================================
// Drift Tuning Adjustments
//==================================================================
if ($drift == 1) {
	$caster = number_format(7.0, 1, '.', '');
    $toef = number_format(0.0, 1, '.', '');
	$toer = number_format(0.0, 1, '.', '');
	if ($gameverstat == 'FM7' or $gameverstat == 'FH4') { $stangle = 60; } 
	if (($tq >= 750) or ($hp >= 950)) { $toer = -0.1; }
	$camf = number_format(-3.5, 1, '.', '');
	$camr = number_format(-0.5, 1, '.', '');
	$brbal = $brbal - 2;
	$brfor = '~150';
	if ($drivetype == 'RWD') {
        $rdiff = 100;
        $rdiffd = 95;
	}
	if ($drivetype == 'AWD') {
		$rdiff = 100;
        $rdiffd = 95;
        $fdiff = 75;
        $fdiffd = 0;
        $cdiff = 90;
	}
}


//==================================================================
//==================================================================
// BEGIN Tuning Gear Ratios
//------------------------------------------------------------------

//------------------------------------------------------------------
// Setting Gear Ratio Variables
//------------------------------------------------------------------
$fdratio = 'X'; 
$firstg = 'X';
$secondg = 'X';
$thirdg = 'X';
$fourthg = 'X';
$fifthg = 'X';
$sixthg = 'X';
$seventhg = 'X';
$eighthg = 'X';
$ninthg = 'X';
$tenthg = 'X';
$eleventhg = 'X';
$twelvethg = 'X';

If ($redline !== 0)	{
	if ($topspeed == 0) { 
		$topspeed = 145;
		$hpcalc = $hp;
		while ($hpcalc >= 175 and $topspeed <= 265) {
			$topspeed = $topspeed + 15;
			$hpcalc = $hpcalc - 100;
		}
		if ($metric == 1) {
			$tspeed = ($topspeed * 1.60934);
		} else {
			$tspeed = $topspeed;
		}
	}

	// Calculate info drive axle tire diameter.  Rear axle is used for 'AWD'.
	if ($drivetype == 'FWD') { 
		$tdiam = (($ftire * $fasp) + (1270 * $frim)) / (1270); // calculates front tire diameter
	} else {
		$tdiam = (($rtire * $rasp) + (1270 * $rrim)) / (1270); // calculates rear tire diameter
	}

	// Check for custom 1st gear ratio and set default value if not provided
	if ($cfirstg > 0) {
		$firstg = $cfirstg;
		$cfirstgr = $firstg; //setting display for form data
	} elseif ($redline > 17000) {
		$firstg = 5.50; // Setting for Formula E
		$cfirstgr = $firstg; //setting display for form data
	} else {
		if ($drivetype == 'RWD') {
			$firstg = 2.90;
			$gearcalc = $numgears;
			while ($gearcalc > 4) {
				$firstg = $firstg + 0.05;
				$gearcalc = $gearcalc - 1;
			}
		}
		if ($drivetype == 'FWD') {
			$firstg = 3.05;
			$gearcalc = $numgears;
			while ($gearcalc > 4) {
				$firstg = $firstg + 0.05;
				$gearcalc = $gearcalc - 1;
			}
		}
		if ($drivetype == 'AWD') {
			$firstg = 3.20;
			$gearcalc = $numgears;
			while ($gearcalc > 4) {
				$firstg = $firstg + 0.05;
				$gearcalc = $gearcalc - 1;
			}
		}
	}
	
	//checks for custom 1st gear speed and calculates one if not provided
	if ($cspeedfirst > 0) {
		$speedfirst = $cspeedfirst;
	} elseif ($redline > 17000) {
		$speedfirst = 65; // Setting for Formula E
	} else {
		if ($numgears == 3) { $speedfirst = (($topspeed / $numgears) + 5); }
		if ($numgears == 4) { $speedfirst = (($topspeed / $numgears) + 10); }
		if ($numgears == 5) { $speedfirst = (($topspeed / $numgears) + 15); }
		if ($numgears == 6) { $speedfirst = (($topspeed / $numgears) + 20); }
		if (($numgears == 6) && ($hp >= 400)) { $speedfirst = (($topspeed / $numgears) + 25); }
		if (($numgears == 6) && ($hp >= 600)) { $speedfirst = (($topspeed / $numgears) + 30); }
		if (($numgears == 6) && ($hp >= 800)) { $speedfirst = (($topspeed / $numgears) + 35); }
		if ($numgears == 7) { $speedfirst = (($topspeed / $numgears) + 25); }
		if (($numgears == 7) && ($hp >= 400)) { $speedfirst = (($topspeed / $numgears) + 30); }
		if (($numgears == 7) && ($hp >= 600)) { $speedfirst = (($topspeed / $numgears) + 35); }
		if (($numgears == 7) && ($hp >= 800)) { $speedfirst = (($topspeed / $numgears) + 35); }
		if ($numgears >= 8) { $speedfirst = (($topspeed / $numgears) + 30); }
		if (($numgears >= 8) && ($hp >= 400)) { $speedfirst = (($topspeed / $numgears) + 35); }
		if (($numgears >= 8) && ($hp >= 600)) { $speedfirst = (($topspeed / $numgears) + 40); }
		if (($numgears >= 8) && ($hp >= 800)) { $speedfirst = (($topspeed / $numgears) + 45); }
		if ($drivetype == 'AWD') { $speedfirst = ($speedfirst * 0.86); }
	}
	if ($fdratioo > 0) {
		$fdratio = $fdratioo;
	} else {
		$fdratio = number_format(($redline * $tdiam) / ($speedfirst * $firstg * 336.13), 2, '.', '');
	}
	$changespeed = ($topspeed - $speedfirst) / ($numgears - 1);
	$gearspeed = $speedfirst;
	$numgearsp = 2;
	$firstg = number_format($firstg, 2, '.', '');

	// Setting other gear ratios
	while ($numgearsp <= $numgears) {
		$gearspeed = $gearspeed + $changespeed;
		if ($numgearsp == 2) { $secondg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 3) { $thirdg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 4) { $fourthg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 5) { $fifthg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 6) { $sixthg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 7) { $seventhg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 8) { $eighthg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 9) { $ninthg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 10) { $tenthg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 11) { $eleventhg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		if ($numgearsp == 12) { $twelvethg = number_format(($redline * $tdiam) / ($gearspeed * $fdratio * 336.13), 2, '.', ''); }
		$numgearsp++;
	}
}

//------------------------------------------------------------------
// Assemble Gear Ratio Output
//------------------------------------------------------------------
if ($numgears == 1) {$gearratios = "<small>(1) $firstg</small>";}
if ($numgears == 2) {$gearratios = "<small>(1) $firstg - (2) $secondg</small>";}
if ($numgears == 3) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg</small>";}
if ($numgears == 4) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg - (4) $fourthg</small>";}
if ($numgears == 5) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg - (4) $fourthg - (5) $fifthg</small>";}
if ($numgears == 6) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg - (4) $fourthg - (5) $fifthg - (6) $sixthg</small>";}
if ($numgears == 7) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg - (4) $fourthg - (5) $fifthg - (6) $sixthg - (7) $seventhg</small>";}
if ($numgears == 8) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg - (4) $fourthg - (5) $fifthg - (6) $sixthg - (7) $seventhg - (8) $eighthg</small>";}
if ($numgears == 9) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg - (4) $fourthg - (5) $fifthg - (6) $sixthg - (7) $seventhg - (8) $eighthg - (9) $ninthg</small>";}
if ($numgears == 10) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg - (4) $fourthg - (5) $fifthg - (6) $sixthg - (7) $seventhg - (8) $eighthg - (9) $ninthg - (10) $tenthg</small>";}
if ($numgears == 11) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg - (4) $fourthg - (5) $fifthg - (6) $sixthg - (7) $seventhg - (8) $eighthg - (9) $ninthg - (10) $tenthg - (10) $eleventhg</small>";}
if ($numgears == 12) {$gearratios = "<small>(1) $firstg - (2) $secondg - (3) $thirdg - (4) $fourthg - (5) $fifthg - (6) $sixthg - (7) $seventhg - (8) $eighthg - (9) $ninthg - (10) $tenthg - (10) $eleventhg - (10) $twelvethg</small>";}
if ($metric == 1) { $speedfirst = number_format(($speedfirst * 1.60934), 2, '.', ''); }

//==================================================================
//==================================================================


//==================================================================
//==================================================================
// BEGIN DRAG TUNING

if ($drag == 1) {
    // FM7 ARB Range = 1.0 to 40.0
    $arbf = 1.0;
    $arbr = 40.0;
    // FM7 B&R Range = 1.0 to 14.0
    $rebf = 1.0;
    $rebr = 14.0;
    $bumpf = 14.0;
    $bumpr = 14.0;
	$srfa = "&darr;&darr; MIN &darr;&darr;";
	$srra = "&uarr;&uarr; MAX &uarr;&uarr;";
	$camf = -0.5;
	$camr = -0.5;
	$toef = -0.1;
	$toer = -0.1;
	$caster = 5.0;
	$brbal = 50;
	$brfor = 100;
	$rhf = "&uarr;&uarr; MAX &uarr;&uarr;";
	$rhr = "&uarr;&uarr; MAX &uarr;&uarr;";
	
	// Differential
	if ($drivetype == 'RWD') {
		$rdiff = 100;
		$rdiffd = 100;
		$fpsi = 35.0;
		$rpsi = 27.5;
	}
    if ($drivetype == 'FWD') {
		$fdiff = 100;
		$fdiffd = 0;
		$fpsi = 27.5;
		$rpsi = 35.0;
	}
    if ($drivetype == 'AWD') {
		$fdiff = 100;
		$fdiffd = 0;
		$rdiff = 100;
		$rdiffd = 100;
		$cdiff = 80;
		$fpsi = 27.5;
		$rpsi = 27.0;
	}
	if ($metric == 1) {
		$rbar = ($rpsi * 0.0689475729);
		$fbar = ($fpsi * 0.0689475729);
		$rpsi = round($rbar, 2);
		$fpsi = round($fbar, 2);
	}
}
//==================================================================
//==================================================================

//==================================================================
//==================================================================
// Zero out form data if no weight is input.  This keeps ratios private and keeps the form clean on first load.

if ($wght == 0) {
	$fpsi = "X";
	$rpsi = "X";
	$arbf = "X";
	$arbr = "X";
	$srfa = "X";
	$srra = "X";
	$rebf = "X";
	$rebr = "X";
	$bumpf = "X";
	$bumpr = "X";
	$camf = "X";
	$camr = "X";
	$toef = "X";
	$toer = "X";
	$caster = "X";
	$brbal = "X";
	$brfor = "X";
	$arbf3 = "X";
	$arbr3 = "X";
	$rebf3r = "X";
	$rebr3r = "X";
	$bumpf3r = "X";
	$bumpr3r = "X";
	$rebf3o = "X";
	$rebr3o = "X";
	$bumpf3o = "X";
	$bumpr3o = "X";
	$arbf6 = "X";
	$arbr6 = "X";
	$rebf6 = "X";
	$rebr6 = "X";
	$bumpf6 = "X";
	$bumpr6 = "X";
	$cdiff = "X";
	$fdiff = "X";
	$fdiffd = "X";
	$rdiff = "X";
	$rdiffd = "X";
	$arbfraw = "X";
	$arbrraw = "X";
}
//==================================================================
//==================================================================

	
//==================================================================
//==================================================================
// Form Selection calculations for setting previous selection to make sticky


//------------------------------------------------------------------
// Units Selection
//------------------------------------------------------------------
$units01 = '<option value="Imperial">Imperial Units</option>';
if ($units == "Imperial") { $units01 = '<option value="Imperial" selected>Imperial Units</option>'; }
        
$units02 = '<option value="Metric">Metric Units</option>';
if ($units == "Metric") { $units02 = '<option value="Metric" selected>Metric Units</option>'; } 

//------------------------------------------------------------------
// Tune Type Selection
//------------------------------------------------------------------
$tt01 = '<option value="Circuit">Circuit</option>';
if ($ttype == "Circuit") { $tt01 = '<option value="Circuit" selected>Circuit</option>'; }
        
$tt02 = '<option value="Drag">Drag</option>';
if ($ttype == "Drag") { $tt02 = '<option value="Drag" selected>Drag</option>'; }
        
$tt03 = '<option value="Drift">Drift</option>';
if ($ttype == "Drift") { $tt03 = '<option value="Drift" selected>Drift</option>'; }
        
$tt04 = '<option value="Rally">Rally</option>';
if ($ttype == "Rally") { $tt04 = '<option value="Rally" selected>Rally</option>'; }
        
$tt05 = '<option value="Offroad">Off-road</option>';
if ($ttype == "Offroad") { $tt05 = '<option value="Offroad" selected>Off-road</option>'; }
        
$tt06 = '<option value="Buggy">Buggy</option>';
if ($ttype == "Buggy") { $tt06 = '<option value="Buggy" selected>Buggy</option>'; }

//------------------------------------------------------------------
// Drive Type Selection
//------------------------------------------------------------------
$dtrwd = '<option value="RWD">RWD</option>';
if ($drivetype == 'RWD') {$dtrwd = '<option value="RWD" selected>RWD</option>';}
        
$dtfwd = '<option value="FWD">FWD</option>';
if ($drivetype == 'FWD') {$dtfwd = '<option value="FWD" selected>FWD</option>';}
        
$dtawd = '<option value="AWD">AWD</option>';
if ($drivetype == 'AWD') {$dtawd = '<option value="AWD" selected>AWD</option>';}

//------------------------------------------------------------------
// Tire Type Selection
//------------------------------------------------------------------
$tirestock = '<option value="Stock">Stock</option>';
if ($tirecomp == "Stock") {$tirestock = '<option value="Stock" selected>Stock</option>';}
        
$tirestreet = '<option value="Street">Street</option>';
if ($tirecomp == "Street") {$tirestreet = '<option value="Street" selected>Street</option>';}
        
$tiresport = '<option value="Sport">Sport</option>';
if ($tirecomp == "Sport") {$tiresport = '<option value="Sport" selected>Sport</option>';}
        
$tirerace = '<option value="Race">Race</option>';
if ($tirecomp == "Race") {$tirerace = '<option value="Race" selected>Race</option>';}
        
$tiredrag = '<option value="Drag">Drag</option>';
if ($tirecomp == "Drag") {$tiredrag = '<option value="Drag" selected>Drag</option>';}
        
$tirerally = '<option value="Rally">Rally</option>';
if ($tirecomp == "Rally") {$tirerally = '<option value="Rally" selected>Rally</option>';}
        
$tireoffroad = '<option value="Offroad">Offroad</option>';
if ($tirecomp == "Offroad") {$tireoffroad = '<option value="Offroad" selected>Offroad</option>';}

//------------------------------------------------------------------
// Game Version
//------------------------------------------------------------------
$gver0 = '<option value="FH4">Horizon 4</option>';
if ($gameverstat == "FH4") {$gver0 = '<option value="FH4" selected>Horizon 4</option>';}
        
$gver1 = '<option value="FM7">Motorsport 7</option>';
if ($gameverstat == "FM7") {$gver1 = '<option value="FM7" selected>Motorsport 7</option>';}
        
$gver2 = '<option value="FH3">Horizon 3</option>';
if ($gameverstat == "FH3") {$gver2 = '<option value="FH3" selected>Horizon 3</option>';}
        
$gver3 = '<option value="FM6">Motorsport 6</option>';
if ($gameverstat == "FM6") {$gver3 = '<option value="FM6" selected>Motorsport 6</option>';}
        
$gver4 = '<option value="FH2">Horizon 2</option>';
if ($gameverstat == "FH2") {$gver4 = '<option value="FH2" selected>Horizon 2</option>';}
        
$gver5 = '<option value="FM5">Motorsport 5</option>';
if ($gameverstat == "FM5") {$gver5 = '<option value="FM5" selected>Motorsport 5</option>';}

//------------------------------------------------------------------
// Same Size Checkbox check
//------------------------------------------------------------------
if ($samesize == "Same") {
	$sizecheck = " checked";
} else {
	$sizecheck = "";
}

//------------------------------------------------------------------
// 2x FH3 Damper Mod
//------------------------------------------------------------------
if ($fhdampermod == "double") {
	$dampercheck = " checked";
} else {
	$dampercheck = "";
}

//------------------------------------------------------------------
// Number of Gears
//------------------------------------------------------------------
$ng1 = '<option value="1">1</option>';
if ($numgears == 1) { $ng1 = '<option value="1" selected>1</option>'; }

$ng2 = '<option value="2">2</option>';
if ($numgears == 2) { $ng2 = '<option value="2" selected>2</option>'; }
        
$ng3 = '<option value="3">3</option>';
if ($numgears == 3) { $ng3 = '<option value="3" selected>3</option>'; }
        
$ng4 = '<option value="4">4</option>';
if ($numgears == 4) { $ng4 = '<option value="4" selected>4</option>'; }
        
$ng5 = '<option value="5">5</option>';
if ($numgears == 5) { $ng5 = '<option value="5" selected>5</option>'; }
        
$ng6 = '<option value="6">6</option>';
if ($numgears == 6) { $ng6 = '<option value="6" selected>6</option>'; }
        
$ng7 = '<option value="7">7</option>';
if ($numgears == 7) { $ng7 = '<option value="7" selected>7</option>'; }
        
$ng8 = '<option value="8">8</option>';
if ($numgears == 8) { $ng8 = '<option value="8" selected>8</option>'; }
        
$ng9 = '<option value="9">9</option>';
if ($numgears == 9) { $ng9 = '<option value="9" selected>9</option>'; }
        
$ng10 = '<option value="10">10</option>';
if ($numgears == 10) { $ng10 = '<option value="10" selected>10</option>'; }
        
$ng11 = '<option value="11">11</option>';
if ($numgears == 11) { $ng11 = '<option value="11" selected>11</option>'; }


//------------------------------------------------------------------
// Suspension Stiffness Type
//------------------------------------------------------------------
$StiffType1 = '<option value="Normal">Average</option>';
if ($StiffType == "Normal") { $StiffType1 = '<option value="Normal" selected>Average</option>'; }
        
$StiffType2 = '<option value="Firm">Firmer</option>';
if ($StiffType == "Firm") { $StiffType2 = '<option value="Firm" selected>Firmer</option>'; }
        
$StiffType3 = '<option value="Soft">Softer</option>';
if ($StiffType == "Soft") { $StiffType3 = '<option value="Soft" selected>Softer</option>'; }
        
$StiffType4 = '<option value="Firm2">Firmest</option>';
if ($StiffType == "Firm2") { $StiffType4 = '<option value="Firm2" selected>Firmest</option>'; }
        
$StiffType5 = '<option value="Soft2">Softest</option>';
if ($StiffType == "Soft2") { $StiffType5 = '<option value="Soft2" selected>Softest</option>'; }


//------------------------------------------------------------------
// Suspension Travel
//------------------------------------------------------------------
$TravType1 = '<option value="Shortest">Shortest</option>';
if ($TravType == "Shortest") { $TravType1 = '<option value="Shortest" selected>Shortest</option>'; }
        
$TravType2 = '<option value="Shorter">Shorter</option>';
if ($TravType == "Shorter") { $TravType2 = '<option value="Shorter" selected>Shorter</option>'; }
        
$TravType3 = '<option value="Average">Average</option>';
if ($TravType == "Average") { $TravType3 = '<option value="Average" selected>Average</option>'; }
        
$TravType4 = '<option value="Longer">Longer</option>';
if ($TravType == "Longer") { $TravType4 = '<option value="Longer" selected>Longer</option>'; }
        
$TravType5 = '<option value="Longest">Longest</option>';
if ($TravType == "Longest") { $TravType5 = '<option value="Longest" selected>Longest</option>'; }


//------------------------------------------------------------------
// Engine Location
//------------------------------------------------------------------
$elayout1 = '<option value="front">Front-Eng</option>';
if ($elayout == "front") { $elayout1 = '<option value="front" selected>Front-Eng</option>'; }
        
$elayout2 = '<option value="mid">Mid-Eng</option>';
if ($elayout == "mid") { $elayout2 = '<option value="mid" selected>Mid-Eng</option>'; }
        
$elayout3 = '<option value="rear">Rear-Eng</option>';
if ($elayout == "rear") { $elayout3 = '<option value="rear" selected>Rear-Eng</option>'; }

//==================================================================
//==================================================================

?>

<!-- END PHP SCRIPT -->

	<div class="row">
		<div class="col-lg-6">
			<div class="row">
				<div class="col-lg-12">
					<div class="panel panel-primary">
							<div class="panel-body">
                                <h4 id="forms">BG55.COM Forza Tuning Calculator</h4>
								<p><i><small><font color="red">*Note:</font> In FM7, torque is no longer listed in the Upgrades interface, but it can be found in the "My Garage" and "Select Car" interfaces.  Just change the view (Y on the xb1 controller) to find it.  Torque is essential to the function of the calculator (differential, toe and gearbox).</small></i></p>
                                <p>For help with undertanding how all of the different parts work and/or help with tunings/fine-tuning, please check out the <a href="fm7-tuning-help.html" target="_blank">BG55.COM Forza Tuning Assistant</a>.</p>
							</div>
					</div>
				</div>
			</div>

			<div class="well bs-component">
				<form class="form-horizontal" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>#results" method="post">
					<fieldset>
						<legend>Vehicle Data Input</legend>
						
						<div class="form-group">
							<label class="col-lg-3 control-label" for="select">Tune Type</label>
							<div class="col-lg-3">
								<select class="form-control" id="select" name="ttype">
									<?php echo $tt01; ?>
									<?php echo $tt02; ?>
									<?php echo $tt03; ?>
									<?php echo $tt04; ?>
									<?php echo $tt05; ?>
									<?php echo $tt06; ?>
								</select>
							</div>
							<label class="col-lg-3 control-label" for="select">Forza Version</label>
							<div class="col-lg-3">
								<select class="form-control" id="select" name="gamever">
									<?php echo $gver0; ?>
									<?php echo $gver1; ?>
									<?php echo $gver2; ?>
									<?php echo $gver3; ?>
									<?php echo $gver4; ?>
									<?php echo $gver5; ?>
								</select>
							</div>
                        </div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="select"><b>Units</b></label>
							<div class="col-lg-9">
								<select class="form-control" id="select" name="units">
									<?php echo $units01; ?>
									<?php echo $units02; ?>
								</select>
							</div>
						</div>
						<hr>
						<div class="form-group">
							<div class="col-lg-12">
								<p><i><small>Enter Year, Make, &amp; Model (optional for multi-tabs &amp; future export)</small></i><p>
							</div>
						</div>
                        <div class="form-group">
                            <label class="col-lg-1 control-label" for="inputSmall">Year</label>
                            <div class="col-lg-2">
                                <input type="number" class="form-control input-sm" step="1" min="1900" max="2099" name="ovyear" value="<?php echo $ovyear; ?>">
                            </div>
                            <label class="col-lg-1 control-label" for="inputSmall">Make</label>
                            <div class="col-lg-3">
                                <input type="text" class="form-control input-sm" name="ovmake" value="<?php echo $ovmake; ?>">
                            </div>
                            <label class="col-lg-1 control-label" for="inputSmall">Model</label>
                            <div class="col-lg-4">
                                <input type="text" class="form-control input-sm" name="ovmodel" value="<?php echo $ovmodel; ?>">
                            </div>
                        </div>
						<hr>
						<div class="form-group">
							<div class="col-lg-12">
								<p><i><b>Enter Vehicle Data for Tuning</b></i><p>
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="select">Drive Type</label>
							<div class="col-lg-3">
								<select class="form-control" id="select" name="drivetype">
									<?php echo $dtrwd; ?>
									<?php echo $dtawd; ?>
									<?php echo $dtfwd; ?>
								</select>
							</div>
							<label class="col-lg-3 control-label" for="select">Eng. Layout</label>
							<div class="col-lg-3">
								<select class="form-control" id="select" name="elayout">
									<?php echo $elayout1; ?>
									<?php echo $elayout2; ?>
									<?php echo $elayout3; ?>
								</select>
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-3">
								<span></span>
							</div>
							<div class="col-lg-9">
								<span><small>Define preferred Damper <b><i>Stiffness</i></b> and suspension length of <b><i>Travel</i></b></small></span>
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="select">Stiffness</label>
							<div class="col-lg-3">
								<select class="form-control" id="select" name="stifftype">
									<?php echo $StiffType4; ?>
									<?php echo $StiffType2; ?>
									<?php echo $StiffType1; ?>
									<?php echo $StiffType3; ?>
									<?php echo $StiffType5; ?>
								</select>
							</div>
							<label class="col-lg-3 control-label" for="select">Travel</label>
							<div class="col-lg-3">
								<select class="form-control" id="select" name="travtype">
									<?php echo $TravType1; ?>
									<?php echo $TravType2; ?>
									<?php echo $TravType3; ?>
									<?php echo $TravType4; ?>
									<?php echo $TravType5; ?>
								</select>
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-3">
								<span></span>
							</div>
							<div class="col-lg-9">
								<span><small>Enter Tire information.  Use <i>Same Size</i> if fornt and rear sizes match.</small></span>
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="select">Tire Compound</label>
							<div class="col-lg-9">
								<select class="form-control" id="select" name="tirecomp">
									<?php echo $tirestock; ?>
									<?php echo $tirestreet; ?>
									<?php echo $tiresport; ?>
									<?php echo $tirerace; ?>
									<?php echo $tiredrag; ?>
                                    <?php echo $tirerally; ?>
                                    <?php echo $tireoffroad; ?>
								</select>
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-3">
							</div>
							<label class="col-lg-9" for="inputSmall">
								<input type="checkbox" name="samesize" value="Same"<?php echo $sizecheck; ?>><small><i>&nbsp;-&nbsp;Front &amp; Rear Tires Same Size (Square)</i></small>
							</label>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="inputSmall">Tire Size (F)</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="5" min="0" max="1000" value="<?php echo $ftire; ?>" name="ftire">
							</div>
							<label class="col-lg-1 control-label" for="inputSmall">/</label>
							<div class="col-lg-2">
								<input type="number" class="form-control input-sm" step="5" min="0" max="995" value="<?php echo $fasp; ?>" name="fasp">
							</div>
							<label class="col-lg-1 control-label" for="inputSmall">R</label>
							<div class="col-lg-2">
								<input type="number" class="form-control input-sm" step="1" min="0" max="32" value="<?php echo $frim; ?>" name="frim">
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="inputSmall">Tire Size (R)</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="5" min="0" max="1000" value="<?php echo $rtire; ?>" name="rtire">
							</div>
							<label class="col-lg-1 control-label" for="inputSmall">/</label>
							<div class="col-lg-2">
								<input type="number" class="form-control input-sm" step="5" min="0" max="995" value="<?php echo $rasp; ?>" name="rasp">
							</div>
							<label class="col-lg-1 control-label" for="inputSmall">R</label>
							<div class="col-lg-2">
								<input type="number" class="form-control input-sm" step="1" min="0" max="99" value="<?php echo $rrim; ?>" name="rrim">
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-3">
								<span></span>
							</div>
							<div class="col-lg-9">
								<span><small>Enter Power, Weight and misc. information</small></span>
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="inputSmall">Max Power</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="1" min="0" max="9999" name="hp" value="<?php echo $power; ?>">
							</div>
							<label class="col-lg-3 control-label" for="inputSmall">Max Torque</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="1" min="0" max="9999" name="tq" value="<?php echo $torque; ?>">
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="inputSmall">Weight</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" min="0" max="999999" name="wght" value="<?php echo $weight; ?>">
							</div>
							<label class="col-lg-3 control-label" for="inputSmall">Front Wght %</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" min="0" max="100" name="wpf" value="<?php echo $wpf; ?>">
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="inputSmall">Ride Heigh (F)</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="0.1" min="0.0" max="99999.9" name="rhf" value="<?php echo number_format($rhf, 1, '.', ''); ?>">
							</div>
							<label class="col-lg-3 control-label" for="inputSmall">Ride Height (R)</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="0.1" min="0.0" max="99999.9" name="rhr" value="<?php echo number_format($rhr, 1, '.', ''); ?>">
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="inputSmall">Downforce (F)</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="0.1" min="0.0" max="99999.9" name="dff" value="<?php echo $dffront; ?>">
							</div>
							<label class="col-lg-3 control-label" for="inputSmall">Downforce (R)</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="0.1" min="0.0" max="99999.9" name="dfr" value="<?php echo $dfrear; ?>">
							</div>
						</div>

						<div class="form-group">
							<div class="col-lg-12">
								<h6>Fine-Tuning Multipliers</h6>
								<p><i><small>Enter the optional suspension component multiplier (1.00 is standard).</small></i><p>
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-3 control-label" for="select">Spring</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="0.01" min="0.10" max="2.0" name="cstiff" value="<?php echo number_format($csmod, 2, '.', ''); ?>">
							</div>
							<label class="col-lg-3 control-label" for="select">Anti-Rollbar</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="0.01" min="0.10" max="2.0" name="astiff" value="<?php echo number_format($asmod, 2, '.', ''); ?>">
							</div>
						</div>

						<div class="form-group">
							<label class="col-lg-3 control-label" for="select">Rebound</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="0.01" min="0.10" max="2.0" name="rstiff" value="<?php echo number_format($rsmod, 2, '.', ''); ?>">
							</div>
							<label class="col-lg-3 control-label" for="select">Bump</label>
							<div class="col-lg-3">
								<input type="number" class="form-control input-sm" step="0.01" min="0.10" max="3.0" name="bstiff" value="<?php echo number_format($bsmod, 2, '.', ''); ?>">
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-3">
							</div>
							<label class="col-lg-9" for="inputSmall">
								<input type="checkbox" name="resetsmod" value="reset"<?php echo $resetsmod; ?>><small><i>&nbsp;-&nbsp;Reset ALL Fine Tuning Multipliers to 1.00...</i></small>
							</label>
						</div>

						<hr>
						
						<div class="form-group">
							<div class="col-lg-12">
								<h6>Transmission Tuning (Race Trans ONLY)</h6>
								<p><i><small>"Top Speed", "# Gears" and "Redline RPM" are all required if Transmission tuning is desired. Leave at ZERO (0) if Transmission tuining is not desired.</small></i><p>
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-2 control-label" for="inputSmall">Top Speed</label>
							<div class="col-lg-2">
								<input type="number" step="0" class="form-control input-sm" min="0" max="999" name="topspd" value="<?php echo $tspeed; ?>">
							</div>
							<label class="col-lg-1 control-label" for="inputSmall">Gears</label>
							<div class="col-lg-2">
								<select class="form-control" id="select" name="numgears">
									<?php echo $ng1; ?>
									<?php echo $ng2; ?>
									<?php echo $ng3; ?>
									<?php echo $ng4; ?>
									<?php echo $ng5; ?>
									<?php echo $ng6; ?>
									<?php echo $ng7; ?>
									<?php echo $ng8; ?>
									<?php echo $ng9; ?>
									<?php echo $ng10; ?>
									<?php echo $ng11; ?>
								</select>
							</div>
							<label class="col-lg-2 control-label" for="inputSmall">Redline</label>
							<div class="col-lg-3">
								<input type="number" step="25" class="form-control input-sm" min="0" max="100000" name="redline" value="<?php echo $redline; ?>">
							</div>
						</div>

						<div class="form-group">
							<div class="col-lg-12">
								<h6>ADVANCED Transmission Tuning (optional)</h6>
								<p><small><i>If the values are set to non-zero, then the calculator assumes you know what you are doing.  Output will be skewed of the inputs here are wrong.  The input here is for custom "Final Drive", "1st Gear Ratio", and "1st Gear Top Speed".</i></small></p>
							</div>
						</div>
						<div class="form-group">
							<label class="col-lg-2 control-label" for="inputSmall">Final Drive</label>
							<div class="col-lg-2">
								<input type="number" step=".01" class="form-control input-sm" min="0.00" max="6.10" name="fdratio" value="<?php echo number_format($fdratiog, 2, '.', ''); ?>">
							</div>
							<label class="col-lg-2 control-label" for="inputSmall">1st Ratio</label>
							<div class="col-lg-2">
								<input type="number" step=".01" class="form-control input-sm" min="0.00" max="6.10" name="firstg" value="<?php echo number_format($cfirstgr, 2, '.', ''); ?>">
							</div>
							<label class="col-lg-2 control-label" for="inputSmall">1st Speed</label>
							<div class="col-lg-2">
								<input type="number" step=".1" class="form-control input-sm" min="0.0" max="999.9" name="speedfirst" value="<?php echo number_format($cspeedf, 2, '.', ''); ?>">
							</div>
							<label class="col-lg-2 control-label" for="inputSmall"></label>
							<div class="col-lg-2">
							</div>
						</div>
						<div class="form-group">
							<div class="col-lg-2">
							</div>
							<label class="col-lg-10" for="inputSmall">
								<input type="checkbox" name="resetdmod" value="reset"<?php echo $resetdmod; ?>><small><i>&nbsp;-&nbsp;Clear Advanced Transmission Input Data (zero out)</i></small>
							</label>
						</div>
						<hr>
						<div class="form-group">
							<div class="col-lg-10 col-lg-offset-4">
								<button type="submit" class="btn btn-primary btn-lg">Calculate Tune</button>
							</div>
						</div>
					</fieldset>
				</form>
			</div>
		</div>
	<div>
		<a NAME="results"></a>
	</div>
		<div class="col-lg-6">
			<div class="panel panel-primary">
				<div class="panel-body">
					<h4>The Tune</h4>
					<p>Below you will find your tuning results.  These results are balanced starting points based on several factors (total weight, weight balance, drive type, downforce, etc.).  Fine tuning will be needed to adapt to your driving style and/or preferences.  If there are any issue or problems with the tune, please contact justLou72 &amp; Beefsupreme42 on the <a href="http://discord.up2speedcustoms.com" target="_blank">Up 2 Speed Customs</a> discord.</p>
                    <p>For help with undertanding how all of the different parts work and/or help with tunings/fine-tuning, please check out the <a href="fm7-tuning-help.html" target="_blank">BG55.COM Forza Tuning Assistant</a>.</p>
				</div>
			</div>
			<div class="bs-component" align="center">
				<table class="table table-striped table-hover table-bordered ">
					<thead class="bg-primary">
						<tr>
							<td align="center" colspan="3"><h5><?php echo $ttyped; ?>: <?php echo $ovyear; ?> <?php echo $ovmake; ?> <?php echo $ovmodel; ?></h5></td>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td align="center" colspan="3"><i><strong><?php echo $elayoutd; ?> <?php echo $drivetype; ?> / <?php echo $tunedatetime; ?></strong></i></td>
						</tr>
						<tr class="bg-primary">
							<td class="bg-primary"><i>Tire Settings</i></td>
							<td align="center" class="bg-primary"><i>Front</i></td>
							<td align="center" class="bg-primary"><i>Rear</i></td>
						</tr>
						<tr>
							<td align="right">Tire Pressure (<?php echo $tirecomp; ?>): </td>
							<td align="center"><?php echo $fpsi; ?> <?php echo $prtag; ?></td>
							<td align="center"><?php echo $rpsi; ?> <?php echo $prtag; ?></td>
						</tr>
						<tr class="bg-primary">
							<td colspan="3" class="bg-primary"><i>Gear Ratios</i></td>
						</tr>
						<tr>
							<td align="right"><i>Final Drive:</i></td>
							<td align="center" colspan="2"><i><?php echo $fdratio; ?></i></td>
						</tr>
						<tr>
							<td align="center" colspan="3">Ratios: <?php echo $gearratios; ?></td>
						</tr>
						<tr class="bg-primary">
							<td class="bg-primary"><i>Alignment Settings</i></td>
							<td align="center" class="bg-primary"><i>Front</i></td>
							<td align="center" class="bg-primary"><i>Rear</i></td>
						</tr>
						<tr>
							<td align="right">Camber: </td>
							<td align="center"><abbr title="wider tire = less camber"><?php echo $camf; ?></abbr></td>
							<td align="center"><abbr title="wider tire = less camber"><?php echo $camr; ?></abbr></td>
						</tr>
						<tr>
							<td align="right">Toe (F/R): </td>
							<td align="center"><abbr title="add more positive front toe to increase turn-in"><?php echo $toef; ?></abbr></td>
							<td align="center"><abbr title="add more negative rear toe to increase stability"><?php echo $toer; ?></abbr></td>
						</tr>
						<tr>
							<td align="right">Caster: </td>
							<td align="center" colspan="2"><abbr title="More Caster = Understeer; Less Caster = Oversteer"><?php echo $caster; ?></abbr></td>
						</tr>
						<tr>
							<td align="right">Steering Angle: </td>
							<td align="center" colspan="2"><abbr title="Drift Suspension Only"><?php echo $stangle; ?></abbr></td>
						</tr>
						<tr class="bg-primary">
							<td class="bg-primary"><i>Suspension Settings (<?php echo $StiffTyped; ?>)</i></td>
							<td align="center" class="bg-primary"><i>Front</i></td>
							<td align="center" class="bg-primary"><i>Rear</i></td>
						</tr>
						<tr>
							<td align="right">Anti-Roll Bar <?php echo $asmodf; ?>: </td>
							<td align="center"><abbr title=""></abbr><?php echo $arbf; ?></td>
							<td align="center"><abbr title=""></abbr><?php echo $arbr; ?></td>
						</tr>
						<tr>
							<td align="right">Spring Rate <?php echo $csmodf; ?>: </td>
							<td align="center"><abbr title=""></abbr><?php echo $srfa; ?></td>
							<td align="center"><abbr title=""></abbr><?php echo $srra; ?></td>
						</tr>
						<tr>
							<td align="right">Rebound <?php echo $rsmodf; ?>: </td>
							<td align="center"><abbr title=""></abbr><?php echo $rebf; ?></td>
							<td align="center"><abbr title=""></abbr><?php echo $rebr; ?></td>
						</tr>
						<tr>
							<td align="right">Bump <?php echo $bsmodf; ?>: </td>
							<td align="center"><abbr title=""></abbr><?php echo $bumpf; ?></td>
							<td align="center"><abbr title=""></abbr><?php echo $bumpr; ?></td>
						</tr>
						<tr class="bg-primary">
							<td class="bg-primary"><i>Brakes</i></td>
							<td align="center" class="bg-primary"><i>Balance</i></td>
							<td align="center" class="bg-primary"><i>Force</i></td>
						</tr>
						<tr>
							<td align="right">Race Brakes: </td>
							<td align="center"><abbr title="all 4 wheels should lock at the same time under heavy braking"><?php echo $brbal; ?>%</abbr></td>
							<td align="center"><abbr title="Wide Range | Higher % = quicker response &amp; shorter pedal"><?php echo $brfor; ?>%</abbr></td>
						</tr>
						<tr class="bg-primary">
							<td class="bg-primary"><i>Differential (<?php echo $drivetype; ?>)</i></td>
							<td align="center" class="bg-primary"><i>Front</i></td>
							<td align="center" class="bg-primary"><i>Rear</i></td>
						</tr>
						<tr>
							<td align="right">Acceleration %: </td>
							<td align="center"><abbr title="lower to minimize on-throttle understeer"><?php echo $fdiff; ?></abbr></td>
							<td align="center"><abbr title="should always be at least 20 higher than Decel %"><?php echo $rdiff; ?></abbr></td>
						</tr>
						<tr>
							<td align="right">Deceleration %: </td>
							<td align="center"><abbr title="leave at zero for best result"><?php echo $fdiffd; ?></abbr></td>
							<td align="center"><abbr title="increase to minimize off-throttle oversteer"><?php echo $rdiffd; ?></abbr></td>
						</tr>
						<tr>
							<td align="right">Center Balance %: </td>
							<td align="center" colspan="2"><abbr title="on tarmac, increase % (to rear) for more control"><?php echo $cdiff; ?></abbr></td>
						</tr>
						<!-- ==================================  -->
						<tr class="bg-primary">
							<td colspan="3" class="bg-primary" align="left"><b><i>Inputs &amp; Additional Vehicle Data (<?php echo $units; ?>)</i></b></td>
						</tr>
						<tr>
							<td align="right"><i>Power to Weight Ratio</i></td>
							<td align="center" colspan="2"><b><?php echo $pwr; ?>  <?php echo $pwrtag; ?></b></td>
						</tr>
						<tr>
							<td align="right"><i>Engine &amp; Drive Layout</i></td>
							<td align="center"><?php echo $elayoutd; ?></td>
							<td align="center"><?php echo $drivetype; ?></td>
						</tr>
						<tr>
							<td align="right"><i><?php echo $tirecomp; ?> Tire Compound (F | R)</i></td>
							<td align="center"><?php echo $ftire; ?>/<?php echo $fasp; ?>R<?php echo $frim; ?> (F)</td>
							<td align="center"><?php echo $rtire; ?>/<?php echo $rasp; ?>R<?php echo $rrim; ?> (R)</td>
						</tr>
						<tr>
							<td align="right"><i>Tire Circumfrance (F | R)</i></td>
							<td align="center">(F) <?php echo $ftc; ?> <?php echo $tireunitl; ?></td>
							<td align="center">(R) <?php echo $rtc; ?> <?php echo $tireunitl; ?></td>
						</tr>
						<tr>
							<td align="right"><i>Tire Volume (F | R)</i></td>
							<td align="center">(F) <?php echo $ftv; ?> <?php echo $tireunitv; ?></td>
							<td align="center">(R) <?php echo $rtv; ?> <?php echo $tireunitv; ?></td>
						</tr>
						<tr>
							<td align="right"><i>Ride Height (input): </td>
							<td align="center">(F) <?php echo $rhf; ?></td>
							<td align="center">(R) <?php echo $rhr; ?></td>
						</tr>
						<tr>
							<td align="right"><i>Downforce (input): </td>
							<td align="center">(F) <?php echo $dffront; ?></td>
							<td align="center">(R) <?php echo $dfrear; ?></td>
						</tr>
						<tr>
							<td align="right"><i>Max Power &amp; Torque</i></td>
							<td align="center"><?php echo $power; ?> <?php echo $pwtag; ?></td>
							<td align="center"><?php echo $torque; ?> <?php echo $tqtag; ?></td>
						</tr>
						<tr>
							<td align="right"><i>Total Wght &amp; Wght % Front</i></td>
							<td align="center"><?php echo $weight; ?> <?php echo $wtag; ?></td>
							<td align="center"><?php echo $wpf; ?>%</td>
						</tr>
						<tr>
							<td align="right"><i>Spring &amp; ARB Modifiers</i></td>
							<td align="center">Spr: <?php echo $csmodf; ?></td>
							<td align="center">ARB: <?php echo $asmodf; ?></td>
						</tr>
						<tr>
							<td align="right"><i>Rebound &amp; Bump Modifiers</i></td>
							<td align="center">Rbd: <?php echo $rsmodf; ?></td>
							<td align="center">Bmp: <?php echo $bsmodf; ?></td>
						</tr>
						<tr>
							<td align="right"><i>Target Top Spd (in 1st)</i></td>
							<td align="center" colspan="2"><?php echo $tspeed; ?> <?php echo $stag; ?> (<?php echo number_format($speedfirst, 2, '.', ''); ?> <?php echo $stag; ?> in 1st)</td>
						</tr>
						<tr>
							<td align="right"><i>Redline RPM &amp; # of Gears</i></td>
							<td align="center"><?php echo $redline; ?> RPM</td>
							<td align="center"><?php echo $numgears; ?></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>

	</div>

<!-- End Display Tune Data -->
	
</FONT>
</body></html>